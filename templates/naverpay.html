{% extends "base.html" %}

{% block title %}ë„¤ì´ë²„í˜ì´ ë³€í™˜ê¸° - ì›¹ ê¸°ë°˜ í†µí•© ì£¼ë¬¸ ë„êµ¬{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-12">
            <!-- í—¤ë” -->
            <div class="text-center mb-5">
                <h1 class="display-5 fw-bold text-warning">
                    <i class="fas fa-shopping-cart me-3"></i>ë„¤ì´ë²„í˜ì´ ë³€í™˜ê¸°
                </h1>
                <p class="lead text-muted">ë„¤ì´ë²„í˜ì´ ì˜µì…˜ê³¼ ì¹´ë“œì˜ìˆ˜ì¦ì„ ë³€í™˜í•©ë‹ˆë‹¤</p>
            </div>

            <!-- í”Œë˜ì‹œ ë©”ì‹œì§€ -->
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ 'danger' if category == 'error' else 'success' }} alert-dismissible fade show" role="alert">
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}


            <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
            <ul class="nav nav-tabs" id="naverpayTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link {% if not active_tab or active_tab == 'order' %}active{% endif %}" id="order-tab" data-bs-toggle="tab" data-bs-target="#order-pane" type="button" role="tab">
                        <i class="fas fa-shopping-bag me-2"></i>ì£¼ë¬¸ë‚´ì—­ ë³€í™˜
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link {% if active_tab == 'card' %}active{% endif %}" id="card-tab" data-bs-toggle="tab" data-bs-target="#card-pane" type="button" role="tab">
                        <i class="fas fa-credit-card me-2"></i>ì¹´ë“œì˜ìˆ˜ì¦ ë³€í™˜
                    </button>
                </li>
            </ul>

            <!-- íƒ­ ì½˜í…ì¸  -->
            <div class="tab-content" id="naverpayTabsContent">
                <!-- ì£¼ë¬¸ë‚´ì—­ ë³€í™˜ íƒ­ -->
                <div class="tab-pane fade {% if not active_tab or active_tab == 'order' %}show active{% endif %}" id="order-pane" role="tabpanel">
                    <div class="card shadow-lg">
                        <div class="card-header bg-warning text-dark">
                            <h5 class="mb-0"><i class="fas fa-edit me-2"></i>ì£¼ë¬¸ë‚´ì—­ HTML ë³€í™˜</h5>
                        </div>
                        <div class="card-body">
                            <form method="POST" action="/naverpay/convert">
                                <!-- HTML ë‚´ìš© ì…ë ¥ -->
                                <div class="mb-4">
                                    <label for="html_content" class="form-label fw-bold">
                                        <i class="fas fa-code me-2"></i>ë„¤ì´ë²„í˜ì´ ì£¼ë¬¸ë‚´ì—­ HTML
                                    </label>
                                    <textarea 
                                        class="form-control" 
                                        id="html_content" 
                                        name="html_content" 
                                        rows="15" 
                                        placeholder="ë„¤ì´ë²„í˜ì´ ì£¼ë¬¸ë‚´ì—­ì˜ HTML ë‚´ìš©ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”..."
                                        required
                                    >{{ html_content or '' }}</textarea>
                                    <div class="form-text">ë„¤ì´ë²„í˜ì´ ì£¼ë¬¸ë‚´ì—­ í˜ì´ì§€ì˜ HTMLì„ ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.</div>
                                </div>

                                <!-- ì˜µì…˜ ê°œìˆ˜ -->
                                <div class="mb-4">
                                    <label for="option_count" class="form-label fw-bold">
                                        <i class="fas fa-list me-2"></i>ì‚¬ìš©í•  ì˜µì…˜ ê°œìˆ˜
                                    </label>
                                    <select class="form-select" id="option_count" name="option_count" required>
                                        <option value="1" {% if option_count == 1 %}selected{% endif %}>1ê°œ</option>
                                        <option value="2" {% if option_count == 2 %}selected{% endif %}>2ê°œ</option>
                                        <option value="3" {% if option_count == 3 %}selected{% endif %}>3ê°œ</option>
                                        <option value="4" {% if option_count == 4 %}selected{% endif %}>4ê°œ</option>
                                        <option value="5" {% if option_count == 5 %}selected{% endif %}>5ê°œ</option>
                                    </select>
                                    <div class="form-text">ì‚¬ì€í’ˆì€ ìë™ìœ¼ë¡œ ì œê±°ë©ë‹ˆë‹¤.</div>
                                </div>

                                <!-- êµ¬ë§¤í™•ì •ì¼ ì…ë ¥ í•„ë“œ ì œê±°ë¨ - HTMLì—ì„œ ìë™ ì¶”ì¶œ -->

                                <!-- ì˜µì…˜ë³„ ì…ë ¥ í•„ë“œë“¤ (ë™ì ìœ¼ë¡œ ìƒì„±) -->
                                <div id="option-fields" class="mb-4" style="display: none;">
                                    <h6 class="fw-bold text-primary mb-3">ì˜µì…˜ë³„ ìƒí’ˆ ì •ë³´ ì…ë ¥</h6>
                                    <div id="option-inputs">
                                        <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                                    </div>
                                    
                                    <h6 class="fw-bold text-primary mb-3 mt-4">ê¸°íƒ€ í•­ëª© ì…ë ¥</h6>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="ìŠ¤í† ì–´ëª…" class="form-label">ìŠ¤í† ì–´ëª…</label>
                                                <input type="text" class="form-control" id="ìŠ¤í† ì–´ëª…" name="ìŠ¤í† ì–´ëª…" value="{{ ê¸°íƒ€í•­ëª©.ìŠ¤í† ì–´ëª… if ê¸°íƒ€í•­ëª© else '' }}">
                                            </div>
                                            <div class="mb-3">
                                                <label for="ë°°ì†¡ë¹„" class="form-label">ë°°ì†¡ë¹„(ë°°ì†¡ë¹„ ì—†ì„ ê²½ìš° 'ë¬´ë£Œ ë°°ì†¡' ì…ë ¥)</label>
                                                <input type="text" class="form-control" id="ë°°ì†¡ë¹„" name="ë°°ì†¡ë¹„" value="{{ ê¸°íƒ€í•­ëª©.ë°°ì†¡ë¹„ if ê¸°íƒ€í•­ëª© else '' }}">
                                            </div>
                                            <div class="mb-3">
                                                <label for="ìˆ˜ë ¹ìëª…" class="form-label">ìˆ˜ë ¹ìëª…(ì´ë¦„ë§Œ ì…ë ¥/ ì…ë ¥ ì‹œ ìë™ìœ¼ë¡œ 'ì´ë¦„(ì´ë¦„)' í˜•íƒœë¡œ ì €ì¥)</label>
                                                <input type="text" class="form-control" id="ìˆ˜ë ¹ìëª…" name="ìˆ˜ë ¹ìëª…" value="{{ ê¸°íƒ€í•­ëª©.ìˆ˜ë ¹ìëª… if ê¸°íƒ€í•­ëª© else '' }}">
                                            </div>
                                            <div class="mb-3">
                                                <label for="ì—°ë½ì²˜" class="form-label">ì—°ë½ì²˜(-í¬í•¨ì…ë ¥)</label>
                                                <input type="text" class="form-control" id="ì—°ë½ì²˜" name="ì—°ë½ì²˜" value="{{ ê¸°íƒ€í•­ëª©.ì—°ë½ì²˜ if ê¸°íƒ€í•­ëª© else '' }}">
                                            </div>
                                            <div class="mb-3">
                                                <label for="ì£¼ì†Œ" class="form-label">ì£¼ì†Œ</label>
                                                <input type="text" class="form-control" id="ì£¼ì†Œ" name="ì£¼ì†Œ" value="{{ ê¸°íƒ€í•­ëª©.ì£¼ì†Œ if ê¸°íƒ€í•­ëª© else '' }}">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="ì£¼ë¬¸ê¸ˆì•¡(ì´ê²°ì œê¸ˆì•¡, ìˆ«ìë§Œ)" class="form-label">ì£¼ë¬¸ê¸ˆì•¡(ì´ê²°ì œê¸ˆì•¡, ìˆ«ìë§Œ)</label>
                                                <input type="text" class="form-control" id="ì£¼ë¬¸ê¸ˆì•¡(ì´ê²°ì œê¸ˆì•¡, ìˆ«ìë§Œ)" name="ì£¼ë¬¸ê¸ˆì•¡(ì´ê²°ì œê¸ˆì•¡, ìˆ«ìë§Œ)" value="{{ ê¸°íƒ€í•­ëª©['ì£¼ë¬¸ê¸ˆì•¡(ì´ê²°ì œê¸ˆì•¡, ìˆ«ìë§Œ)'] if ê¸°íƒ€í•­ëª© else '' }}">
                                            </div>
                                            <div class="mb-3">
                                                <label for="ìƒí’ˆê¸ˆì•¡(ìˆ«ìë§Œ)" class="form-label">ìƒí’ˆê¸ˆì•¡(ìˆ«ìë§Œ)</label>
                                                <input type="text" class="form-control" id="ìƒí’ˆê¸ˆì•¡(ìˆ«ìë§Œ)" name="ìƒí’ˆê¸ˆì•¡(ìˆ«ìë§Œ)" value="{{ ê¸°íƒ€í•­ëª©['ìƒí’ˆê¸ˆì•¡(ìˆ«ìë§Œ)'] if ê¸°íƒ€í•­ëª© else '' }}">
                                            </div>
                                            <div class="mb-3">
                                                <label for="ì¿ í°í• ì¸(ìˆ«ìë§Œ, 0ì…ë ¥ì‹œ divì‚­ì œ)" class="form-label">ì¿ í°í• ì¸(ìˆ«ìë§Œ, 0ì…ë ¥ì‹œ divì‚­ì œ)</label>
                                                <input type="text" class="form-control" id="ì¿ í°í• ì¸(ìˆ«ìë§Œ, 0ì…ë ¥ì‹œ divì‚­ì œ)" name="ì¿ í°í• ì¸(ìˆ«ìë§Œ, 0ì…ë ¥ì‹œ divì‚­ì œ)" value="{{ ê¸°íƒ€í•­ëª©['ì¿ í°í• ì¸(ìˆ«ìë§Œ, 0ì…ë ¥ì‹œ divì‚­ì œ)'] if ê¸°íƒ€í•­ëª© else '0' }}">
                                            </div>
                                            <div class="mb-3">
                                                <label for="ê²°ì œë°°ì†¡ë¹„(ìˆ«ìë§Œ)" class="form-label">ê²°ì œë°°ì†¡ë¹„(ìˆ«ìë§Œ/ë¬´ë£Œë°°ì†¡ì‹œ 0 ì…ë ¥)</label>
                                                <input type="text" class="form-control" id="ê²°ì œë°°ì†¡ë¹„(ìˆ«ìë§Œ)" name="ê²°ì œë°°ì†¡ë¹„(ìˆ«ìë§Œ)" value="{{ ê¸°íƒ€í•­ëª©['ê²°ì œë°°ì†¡ë¹„(ìˆ«ìë§Œ)'] if ê¸°íƒ€í•­ëª© else '' }}">
                                            </div>
                                            <div class="mb-3">
                                                <label for="ì¹´ë“œê²°ì œê¸ˆì•¡(ìˆ«ìë§Œ)" class="form-label">ì¹´ë“œê²°ì œê¸ˆì•¡(ìˆ«ìë§Œ)</label>
                                                <input type="text" class="form-control" id="ì¹´ë“œê²°ì œê¸ˆì•¡(ìˆ«ìë§Œ)" name="ì¹´ë“œê²°ì œê¸ˆì•¡(ìˆ«ìë§Œ)" value="{{ ê¸°íƒ€í•­ëª©['ì¹´ë“œê²°ì œê¸ˆì•¡(ìˆ«ìë§Œ)'] if ê¸°íƒ€í•­ëª© else '' }}">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- ë³€í™˜ ë²„íŠ¼ -->
                                <div class="text-center">
                                    <button type="button" id="preview-btn" class="btn btn-outline-warning btn-lg me-3">
                                        <i class="fas fa-eye me-2"></i>ë¯¸ë¦¬ë³´ê¸°
                                    </button>
                                    <button type="submit" id="convert-btn" class="btn btn-warning btn-lg" style="display: none;">
                                        <i class="fas fa-magic me-2"></i>ì£¼ë¬¸ë‚´ì—­ ë³€í™˜í•˜ê¸°
                                    </button>
                                    <div id="orderLoading" class="mt-2" style="display: none;">
                                        <div class="spinner-border text-warning" role="status">
                                            <span class="visually-hidden">ë³€í™˜ ì¤‘...</span>
                                        </div>
                                        <span class="ms-2">ë³€í™˜ ì¤‘ì…ë‹ˆë‹¤...</span>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- ì£¼ë¬¸ë‚´ì—­ ê²°ê³¼ í‘œì‹œ -->
                    {% if order_result %}
                    <div class="card shadow-lg mt-4">
                        <div class="card-header bg-success text-white">
                            <h5 class="mb-0"><i class="fas fa-check-circle me-2"></i>ì£¼ë¬¸ë‚´ì—­ ë³€í™˜ ê²°ê³¼</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <button class="btn btn-outline-success btn-sm" onclick="copyOrderResult()">
                                    <i class="fas fa-copy me-1"></i>ê²°ê³¼ ë³µì‚¬
                                </button>
                                <button class="btn btn-outline-secondary btn-sm" onclick="downloadOrderResult()">
                                    <i class="fas fa-download me-1"></i>í…ìŠ¤íŠ¸ íŒŒì¼ ë‹¤ìš´ë¡œë“œ
                                </button>
                            </div>
                            <textarea class="form-control" id="order-result-content" rows="20" readonly>{{ order_result }}</textarea>
                        </div>
                    </div>
                    {% endif %}
                </div>

                <!-- ì¹´ë“œì˜ìˆ˜ì¦ ë³€í™˜ íƒ­ -->
                <div class="tab-pane fade {% if active_tab == 'card' %}show active{% endif %}" id="card-pane" role="tabpanel">
                    <div class="card shadow-lg">
                        <div class="card-header bg-info text-white">
                            <h5 class="mb-0"><i class="fas fa-credit-card me-2"></i>ì¹´ë“œì˜ìˆ˜ì¦ HTML ë³€í™˜</h5>
                        </div>
                        <div class="card-body">
                            <form method="POST" action="/naverpay/card">
                                <!-- ì£¼ë¬¸ë‚´ì—­ ë°ì´í„° ìœ ì§€ìš© ìˆ¨ê²¨ì§„ í•„ë“œë“¤ -->
                                <input type="hidden" name="html_content" value="{{ html_content or '' }}">
                                <input type="hidden" name="option_count" value="{{ option_count or 5 }}">
                                
                                <!-- ì¹´ë“œì˜ìˆ˜ì¦ HTML ì…ë ¥ -->
                                <div class="mb-4">
                                    <label for="card_html_content" class="form-label fw-bold">
                                        <i class="fas fa-code me-2"></i>ì¹´ë“œì˜ìˆ˜ì¦ HTML
                                    </label>
                                    <textarea 
                                        class="form-control" 
                                        id="card_html_content" 
                                        name="card_html_content" 
                                        rows="15" 
                                        placeholder="ì¹´ë“œì˜ìˆ˜ì¦ì˜ HTML ë‚´ìš©ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”..."
                                        required
                                    >{{ card_html_content or '' }}</textarea>
                                    <div class="form-text">ì¹´ë“œì˜ìˆ˜ì¦ í˜ì´ì§€ì˜ HTMLì„ ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.</div>
                                </div>

                                <!-- ì£¼ë¬¸ë‚´ì—­ ë¶ˆëŸ¬ì˜¤ê¸° ë²„íŠ¼ -->
                                <div class="mb-4">
                                    <button type="button" class="btn btn-outline-primary" onclick="loadOrderInfo()">
                                        <i class="fas fa-upload me-2"></i>ì£¼ë¬¸ë‚´ì—­ì—ì„œ ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°
                                    </button>
                                    <div class="form-text">ì£¼ë¬¸ë‚´ì—­ ë³€í™˜ ê²°ê³¼ì—ì„œ ìƒí’ˆëª…ê³¼ ê¸ˆì•¡ì„ ìë™ìœ¼ë¡œ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.</div>
                                </div>

                                <!-- ì¹´ë“œì˜ìˆ˜ì¦ ì…ë ¥ í•„ë“œë“¤ -->
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="product" class="form-label">ìƒí’ˆëª…</label>
                                            <input type="text" class="form-control" id="product" name="product" value="{{ card_data.product if card_data else '' }}">
                                        </div>
                                        <div class="mb-3">
                                            <label for="seller" class="form-label">íŒë§¤ììƒí˜¸</label>
                                            <input type="text" class="form-control" id="seller" name="seller" value="{{ card_data.seller if card_data else '' }}">
                                        </div>
                                        <div class="mb-3">
                                            <label for="ceo" class="form-label">ëŒ€í‘œìëª…</label>
                                            <input type="text" class="form-control" id="ceo" name="ceo" value="{{ card_data.ceo if card_data else '' }}">
                                        </div>
                                        <div class="mb-3">
                                            <label for="biznum" class="form-label">ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸(-ë¯¸í¬í•¨)</label>
                                            <input type="text" class="form-control" id="biznum" name="biznum" value="{{ card_data.biznum if card_data else '' }}">
                                        </div>
                                        <div class="mb-3">
                                            <label for="phone" class="form-label">ì „í™”ë²ˆí˜¸(-í¬í•¨ì…ë ¥)</label>
                                            <input type="text" class="form-control" id="phone" name="phone" value="{{ card_data.phone if card_data else '' }}">
                                        </div>
                                        <div class="mb-3">
                                            <label for="address" class="form-label">ì‚¬ì—…ì¥ì£¼ì†Œ</label>
                                            <input type="text" class="form-control" id="address" name="address" value="{{ card_data.address if card_data else '' }}">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="approval_amount" class="form-label">ìŠ¹ì¸ê¸ˆì•¡</label>
                                            <input type="text" class="form-control" id="approval_amount" name="approval_amount" value="{{ card_data.approval_amount if card_data else '' }}">
                                        </div>
                                        <div class="mb-3">
                                            <label for="supply_amount" class="form-label">ê³µê¸‰ê°€ì•¡</label>
                                            <input type="text" class="form-control" id="supply_amount" name="supply_amount" value="{{ card_data.supply_amount if card_data else '' }}">
                                        </div>
                                        <div class="mb-3">
                                            <label for="tax_amount" class="form-label">ë¶€ê°€ì„¸ì•¡</label>
                                            <input type="text" class="form-control" id="tax_amount" name="tax_amount" value="{{ card_data.tax_amount if card_data else '' }}">
                                        </div>
                                        <div class="mb-3">
                                            <label for="service_fee" class="form-label">ë´‰ì‚¬ë£Œ</label>
                                            <input type="text" class="form-control" id="service_fee" name="service_fee" value="{{ card_data.service_fee if card_data else '0' }}">
                                        </div>
                                        <div class="mb-3">
                                            <label for="total" class="form-label">í•©ê³„</label>
                                            <input type="text" class="form-control" id="total" name="total" value="{{ card_data.total if card_data else '' }}">
                                        </div>
                                        <div class="mb-3">
                                            <button type="button" class="btn btn-outline-secondary" onclick="autoCalculate()">
                                                <i class="fas fa-calculator me-2"></i>ìë™ê³„ì‚°
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- ë³€í™˜ ë²„íŠ¼ -->
                                <div class="text-center">
                                    <button type="submit" class="btn btn-info btn-lg" id="cardSubmitBtn">
                                        <i class="fas fa-credit-card me-2"></i>ì¹´ë“œì˜ìˆ˜ì¦ ë³€í™˜í•˜ê¸°
                                    </button>
                                    <div id="cardLoading" class="mt-2" style="display: none;">
                                        <div class="spinner-border text-info" role="status">
                                            <span class="visually-hidden">ë³€í™˜ ì¤‘...</span>
                                        </div>
                                        <span class="ms-2">ë³€í™˜ ì¤‘ì…ë‹ˆë‹¤...</span>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- ì¹´ë“œì˜ìˆ˜ì¦ ê²°ê³¼ í‘œì‹œ -->
                    {% if card_result %}
                    <div class="card shadow-lg mt-4">
                        <div class="card-header bg-info text-white">
                            <h5 class="mb-0"><i class="fas fa-check-circle me-2"></i>ì¹´ë“œì˜ìˆ˜ì¦ ë³€í™˜ ê²°ê³¼</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <button class="btn btn-outline-info btn-sm" onclick="copyCardResult()">
                                    <i class="fas fa-copy me-1"></i>ê²°ê³¼ ë³µì‚¬
                                </button>
                                <button class="btn btn-outline-secondary btn-sm" onclick="downloadCardResult()">
                                    <i class="fas fa-download me-1"></i>í…ìŠ¤íŠ¸ íŒŒì¼ ë‹¤ìš´ë¡œë“œ
                                </button>
                            </div>
                            <textarea class="form-control" id="card-result-content" rows="20" readonly>{{ card_result }}</textarea>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- ì‚¬ìš©ë²• ì•ˆë‚´ -->
            <div class="card shadow-lg mt-4">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0"><i class="fas fa-question-circle me-2"></i>ì‚¬ìš©ë²• ì•ˆë‚´</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="fw-bold text-primary">ğŸ”„ ì£¼ë¬¸ë‚´ì—­ ë³€í™˜ ê³¼ì •</h6>
                            <ol class="list-group list-group-numbered">
                                <li class="list-group-item">HTML ì…ë ¥ â†’ ì˜µì…˜ ê°œìˆ˜ ì„ íƒ</li>
                                <li class="list-group-item">ìƒ˜í”Œì½”ë“œë¡œ êµì²´ â†’ êµ¬ë§¤í™•ì •ì¼ ìˆ˜ì •</li>
                                <li class="list-group-item">ì˜µì…˜ë³„ ìƒí’ˆ ì •ë³´ ì…ë ¥</li>
                                <li class="list-group-item">ê¸°íƒ€ í•­ëª©ë“¤ ì…ë ¥ í›„ ë³€í™˜</li>
                            </ol>
                        </div>
                        <div class="col-md-6">
                            <h6 class="fw-bold text-success">ğŸ’³ ì¹´ë“œì˜ìˆ˜ì¦ ë³€í™˜ ê³¼ì •</h6>
                            <ol class="list-group list-group-numbered">
                                <li class="list-group-item">ì¹´ë“œì˜ìˆ˜ì¦ HTML ì…ë ¥</li>
                                <li class="list-group-item">ì£¼ë¬¸ë‚´ì—­ì—ì„œ ì •ë³´ ìë™ ë¶ˆëŸ¬ì˜¤ê¸°</li>
                                <li class="list-group-item">í•„ìš”í•œ ì •ë³´ ì…ë ¥ í›„ ìë™ê³„ì‚°</li>
                                <li class="list-group-item">ì¹´ë“œì˜ìˆ˜ì¦ ë³€í™˜ ì™„ë£Œ</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// ì£¼ë¬¸ë‚´ì—­ ê²°ê³¼ ë³µì‚¬ ê¸°ëŠ¥
function copyOrderResult() {
    const resultText = document.getElementById('order-result-content');
    resultText.select();
    document.execCommand('copy');
    
    const button = event.target.closest('button');
    const originalText = button.innerHTML;
    button.innerHTML = '<i class="fas fa-check me-1"></i>ë³µì‚¬ ì™„ë£Œ!';
    button.classList.remove('btn-outline-success');
    button.classList.add('btn-success');
    
    setTimeout(() => {
        button.innerHTML = originalText;
        button.classList.remove('btn-success');
        button.classList.add('btn-outline-success');
    }, 2000);
}

// ì£¼ë¬¸ë‚´ì—­ ê²°ê³¼ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥
function downloadOrderResult() {
    const resultText = document.getElementById('order-result-content').value;
    const blob = new Blob([resultText], { type: 'text/plain' });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    // ë™ì  íŒŒì¼ëª… ìƒì„± (ë‚ ì§œ_ìƒí’ˆëª…_ì£¼ë¬¸ë‚´ì—­.txt)
    const today = new Date();
    const dateStr = today.getFullYear().toString().slice(-2) + 
                   String(today.getMonth() + 1).padStart(2, '0') + 
                   String(today.getDate()).padStart(2, '0');
    // ìƒí’ˆëª…ì€ ì²« ë²ˆì§¸ ì˜µì…˜ì—ì„œ ê°€ì ¸ì˜¤ê±°ë‚˜ ê¸°ë³¸ê°’ ì‚¬ìš©
    const firstOptionName = document.querySelector('input[name="option_0_ìƒí’ˆëª…"]');
    const productName = firstOptionName ? firstOptionName.value : 'ìƒí’ˆ';
    a.download = `${dateStr}_${productName}_ì£¼ë¬¸ë‚´ì—­.txt`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    window.URL.revokeObjectURL(url);
}

// ì¹´ë“œì˜ìˆ˜ì¦ ê²°ê³¼ ë³µì‚¬ ê¸°ëŠ¥
function copyCardResult() {
    const resultText = document.getElementById('card-result-content');
    resultText.select();
    document.execCommand('copy');
    
    const button = event.target.closest('button');
    const originalText = button.innerHTML;
    button.innerHTML = '<i class="fas fa-check me-1"></i>ë³µì‚¬ ì™„ë£Œ!';
    button.classList.remove('btn-outline-info');
    button.classList.add('btn-success');
    
    setTimeout(() => {
        button.innerHTML = originalText;
        button.classList.remove('btn-success');
        button.classList.add('btn-outline-info');
    }, 2000);
}

// ì¹´ë“œì˜ìˆ˜ì¦ ê²°ê³¼ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥
function downloadCardResult() {
    const resultText = document.getElementById('card-result-content').value;
    const blob = new Blob([resultText], { type: 'text/plain' });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    // ë™ì  íŒŒì¼ëª… ìƒì„± (ë‚ ì§œ_ìƒí’ˆëª…_ì¹´ë“œì˜ìˆ˜ì¦.txt)
    const today = new Date();
    const dateStr = today.getFullYear().toString().slice(-2) + 
                   String(today.getMonth() + 1).padStart(2, '0') + 
                   String(today.getDate()).padStart(2, '0');
    // ìƒí’ˆëª…ì€ ì¹´ë“œì˜ìˆ˜ì¦ í¼ì—ì„œ ê°€ì ¸ì˜¤ê±°ë‚˜ ê¸°ë³¸ê°’ ì‚¬ìš©
    const productInput = document.getElementById('product');
    const productName = productInput ? productInput.value : 'ìƒí’ˆ';
    a.download = `${dateStr}_${productName}_ì¹´ë“œì˜ìˆ˜ì¦.txt`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    window.URL.revokeObjectURL(url);
}

// ì£¼ë¬¸ë‚´ì—­ ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°
function loadOrderInfo() {
    // ì£¼ë¬¸ë‚´ì—­ ê²°ê³¼ê°€ ìˆëŠ”ì§€ í™•ì¸
    const orderResult = document.getElementById('order-result-content');
    if (!orderResult || !orderResult.value) {
        alert('ë¨¼ì € ì£¼ë¬¸ë‚´ì—­ì„ ë³€í™˜í•´ì£¼ì„¸ìš”.');
        return;
    }
    
    // ì„œë²„ì— ì£¼ë¬¸ë‚´ì—­ ì •ë³´ ì¶”ì¶œ ìš”ì²­
    fetch('/naverpay/extract-order-info', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            html_content: orderResult.value
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            document.getElementById('product').value = data.product || '';
            document.getElementById('approval_amount').value = data.approval_amount || '';
            document.getElementById('total').value = data.total || '';
            autoCalculate();
            alert('ì£¼ë¬¸ë‚´ì—­ì—ì„œ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.');
        } else {
            alert('ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + data.error);
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
    });
}

// ìë™ê³„ì‚° ê¸°ëŠ¥
function autoCalculate() {
    const approval = document.getElementById('approval_amount').value.replace(/,/g, '');
    if (!approval) return;
    
    // ê³µê¸‰ê°€ì•¡ ê³„ì‚° (ìŠ¹ì¸ê¸ˆì•¡ / 1.1)
    const supplyAmount = Math.round(parseInt(approval) / 1.1);
    document.getElementById('supply_amount').value = supplyAmount.toLocaleString();
    
    // ë¶€ê°€ì„¸ì•¡ ê³„ì‚° (ìŠ¹ì¸ê¸ˆì•¡ - ê³µê¸‰ê°€ì•¡)
    const taxAmount = parseInt(approval) - supplyAmount;
    document.getElementById('tax_amount').value = taxAmount.toLocaleString();
    
    // ë´‰ì‚¬ë£ŒëŠ” 0ìœ¼ë¡œ ì„¤ì •
    document.getElementById('service_fee').value = '0';
    
    // í•©ê³„ëŠ” ìŠ¹ì¸ê¸ˆì•¡ê³¼ ë™ì¼
    document.getElementById('total').value = parseInt(approval).toLocaleString();
}

// ì˜µì…˜ë³„ ì…ë ¥ í•„ë“œ ë™ì  ìƒì„± (ê¸°ì¡´ ê°’ ìœ ì§€)
function generateOptionFields(optionCount, optionInputs = []) {
    const container = document.getElementById('option-inputs');
    container.innerHTML = '';
    
    // ìµœëŒ€ 5ê°œë¡œ ì œí•œ
    const maxOptions = Math.min(optionCount, 5);
    
    for (let i = 0; i < maxOptions; i++) {
        const optionData = optionInputs[i] || {};
        const optionDiv = document.createElement('div');
        optionDiv.className = 'card mb-3';
        optionDiv.innerHTML = `
            <div class="card-header">
                <h6 class="mb-0">ì˜µì…˜ ${i + 1}</h6>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="option_${i}_ìƒí’ˆëª…" class="form-label">ìƒí’ˆëª…</label>
                            <input type="text" class="form-control" id="option_${i}_ìƒí’ˆëª…" name="option_${i}_ìƒí’ˆëª…" value="${optionData['ìƒí’ˆëª…'] || ''}">
                        </div>
                        <div class="mb-3">
                            <label for="option_${i}_ì˜µì…˜ëª…" class="form-label">ì˜µì…˜ëª…</label>
                            <input type="text" class="form-control" id="option_${i}_ì˜µì…˜ëª…" name="option_${i}_ì˜µì…˜ëª…" value="${optionData['ì˜µì…˜ëª…'] || ''}">
                        </div>
                        <div class="mb-3">
                            <label for="option_${i}_ìˆ˜ëŸ‰(ìˆ«ìë§Œ)" class="form-label">ìˆ˜ëŸ‰(ìˆ«ìë§Œ)</label>
                            <input type="text" class="form-control" id="option_${i}_ìˆ˜ëŸ‰(ìˆ«ìë§Œ)" name="option_${i}_ìˆ˜ëŸ‰(ìˆ«ìë§Œ)" value="${optionData['ìˆ˜ëŸ‰'] || ''}">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="option_${i}_ìƒí’ˆê°€ê²©(ìˆ«ìë§Œ)" class="form-label">ìƒí’ˆê°€ê²©(ìˆ«ìë§Œ)</label>
                            <input type="text" class="form-control" id="option_${i}_ìƒí’ˆê°€ê²©(ìˆ«ìë§Œ)" name="option_${i}_ìƒí’ˆê°€ê²©(ìˆ«ìë§Œ)" value="${optionData['ìƒí’ˆê°€ê²©'] || ''}">
                        </div>
                        <div class="mb-3">
                            <label for="option_${i}_ìƒí’ˆì´ë¯¸ì§€" class="form-label">ìƒí’ˆì´ë¯¸ì§€</label>
                            <input type="text" class="form-control" id="option_${i}_ìƒí’ˆì´ë¯¸ì§€" name="option_${i}_ìƒí’ˆì´ë¯¸ì§€" value="${optionData['ìƒí’ˆì´ë¯¸ì§€'] || ''}">
                        </div>
                        <div class="mb-3">
                            <label for="option_${i}_ìƒí’ˆ í• ì¸ ì „ ê¸ˆì•¡(ìˆ«ìë§Œ, 0ì…ë ¥ì‹œ ë¯¸ì¶œë ¥)" class="form-label">ìƒí’ˆ í• ì¸ ì „ ê¸ˆì•¡(ìˆ«ìë§Œ, 0ì…ë ¥ì‹œ ë¯¸ì¶œë ¥)</label>
                            <input type="text" class="form-control" id="option_${i}_ìƒí’ˆ í• ì¸ ì „ ê¸ˆì•¡(ìˆ«ìë§Œ, 0ì…ë ¥ì‹œ ë¯¸ì¶œë ¥)" name="option_${i}_ìƒí’ˆ í• ì¸ ì „ ê¸ˆì•¡(ìˆ«ìë§Œ, 0ì…ë ¥ì‹œ ë¯¸ì¶œë ¥)" value="${optionData['ìƒí’ˆ í• ì¸ ì „ ê¸ˆì•¡'] || '0'}">
                        </div>
                    </div>
                </div>
            </div>
        `;
        container.appendChild(optionDiv);
    }
}

// ë„¤ì´ë²„í˜ì´ ë³€í™˜ ë¡œë”© í‘œì‹œ í•¨ìˆ˜
function showOrderLoading() {
    document.getElementById('orderLoading').style.display = 'block';
    document.getElementById('convert-btn').disabled = true;
}

function showCardLoading() {
    document.getElementById('cardLoading').style.display = 'block';
    document.getElementById('cardSubmitBtn').disabled = true;
}

// ë¡œë”© ìˆ¨ê¸°ê¸° í•¨ìˆ˜
function hideOrderLoading() {
    document.getElementById('orderLoading').style.display = 'none';
    document.getElementById('convert-btn').disabled = false;
}

function hideCardLoading() {
    document.getElementById('cardLoading').style.display = 'none';
    document.getElementById('cardSubmitBtn').disabled = false;
}

// ë¯¸ë¦¬ë³´ê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
document.addEventListener('DOMContentLoaded', function() {
    // ë””ë²„ê¹…: í˜ì´ì§€ ë¡œë“œ ì‹œ ë°ì´í„° í™•ì¸
    console.log("=== ë„¤ì´ë²„í˜ì´ í˜ì´ì§€ ë¡œë“œ ë””ë²„ê¹… ===");
    
    const previewBtn = document.getElementById('preview-btn');
    const convertBtn = document.getElementById('convert-btn');
    const optionFields = document.getElementById('option-fields');
    const optionCountSelect = document.getElementById('option_count');
    
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ê¸°ì¡´ ì…ë ¥ê°’ë“¤ì´ ìˆë‹¤ë©´ ìë™ìœ¼ë¡œ í‘œì‹œ
    const htmlContent = document.getElementById('html_content').value;
    const optionCount = parseInt(optionCountSelect.value);
    
    console.log(`HTML ë‚´ìš© ê¸¸ì´: ${htmlContent ? htmlContent.length : 0}ì`);
    console.log(`ì˜µì…˜ ê°œìˆ˜: ${optionCount}`);
    
    if (htmlContent && optionCount > 0) {
        // ì˜µì…˜ë³„ ì…ë ¥ í•„ë“œ ìƒì„± (ê¸°ì¡´ ê°’ ìœ ì§€)
        const optionInputs = {{ option_inputs | tojson if option_inputs else '[]' }};
        console.log(`ì˜µì…˜ ì…ë ¥ ë°ì´í„°:`, optionInputs);
        
        generateOptionFields(optionCount, optionInputs);
        
        // ì…ë ¥ í•„ë“œ ì„¹ì…˜ í‘œì‹œ
        optionFields.style.display = 'block';
        
        // ë²„íŠ¼ ë³€ê²½
        if (previewBtn) previewBtn.style.display = 'none';
        if (convertBtn) convertBtn.style.display = 'inline-block';
        
        console.log("ê¸°ì¡´ ì…ë ¥ê°’ìœ¼ë¡œ í•„ë“œ ìë™ ìƒì„± ì™„ë£Œ");
    } else {
        console.log("ê¸°ì¡´ ì…ë ¥ê°’ì´ ì—†ì–´ì„œ ê¸°ë³¸ ìƒíƒœë¡œ ì‹œì‘");
    }
    
    if (previewBtn) {
        previewBtn.addEventListener('click', function() {
            const htmlContent = document.getElementById('html_content').value;
            const optionCount = parseInt(optionCountSelect.value);
            
            if (!htmlContent) {
                alert('HTML ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ì˜µì…˜ë³„ ì…ë ¥ í•„ë“œ ìƒì„±
            generateOptionFields(optionCount);
            
            // ì…ë ¥ í•„ë“œ ì„¹ì…˜ í‘œì‹œ
            optionFields.style.display = 'block';
            
            // ë²„íŠ¼ ë³€ê²½
            previewBtn.style.display = 'none';
            convertBtn.style.display = 'inline-block';
            
            // í¼ ì•¡ì…˜ ë³€ê²½
            const form = previewBtn.closest('form');
            form.action = '/naverpay/convert';
            
            // ìŠ¤í¬ë¡¤ì„ ì…ë ¥ í•„ë“œë¡œ ì´ë™
            optionFields.scrollIntoView({ behavior: 'smooth' });
        });
    }
    
    // ì£¼ë¬¸ë‚´ì—­ ë³€í™˜ í¼ ì œì¶œ ì‹œ ë¡œë”© í‘œì‹œ
    const orderForm = document.querySelector('form[action="/naverpay/convert"]');
    if (orderForm) {
        orderForm.addEventListener('submit', function() {
            showOrderLoading();
        });
    }
    
    // ì¹´ë“œì˜ìˆ˜ì¦ í¼ ì œì¶œ ì‹œ ë¡œë”© í‘œì‹œ ë° ì£¼ë¬¸ë‚´ì—­ ë°ì´í„° ì¶”ê°€
    const cardForm = document.querySelector('form[action="/naverpay/card"]');
    if (cardForm) {
        cardForm.addEventListener('submit', function(e) {
            showCardLoading();
            // ë””ë²„ê¹…: ì¹´ë“œì˜ìˆ˜ì¦ í¼ ì œì¶œ ì‹œ ë°ì´í„° ìˆ˜ì§‘
            console.log("=== ì¹´ë“œì˜ìˆ˜ì¦ í¼ ì œì¶œ ë””ë²„ê¹… ===");
            
            // ê¸°ì¡´ ìˆ¨ê²¨ì§„ í•„ë“œë“¤ ì œê±° (ì¤‘ë³µ ë°©ì§€)
            const existingHiddenFields = cardForm.querySelectorAll('input[type="hidden"][name^="option_"], input[type="hidden"][name="ìŠ¤í† ì–´ëª…"], input[type="hidden"][name="ë°°ì†¡ë¹„"], input[type="hidden"][name="ìˆ˜ë ¹ìëª…"], input[type="hidden"][name="ì—°ë½ì²˜"], input[type="hidden"][name="ì£¼ì†Œ"], input[type="hidden"][name="ì£¼ë¬¸ê¸ˆì•¡(ì´ê²°ì œê¸ˆì•¡, ìˆ«ìë§Œ)"], input[type="hidden"][name="ìƒí’ˆê¸ˆì•¡(ìˆ«ìë§Œ)"], input[type="hidden"][name="ì¿ í°í• ì¸(ìˆ«ìë§Œ, 0ì…ë ¥ì‹œ divì‚­ì œ)"], input[type="hidden"][name="ê²°ì œë°°ì†¡ë¹„(ìˆ«ìë§Œ)"], input[type="hidden"][name="ì¹´ë“œê²°ì œê¸ˆì•¡(ìˆ«ìë§Œ)"]');
            existingHiddenFields.forEach(field => field.remove());
            
            // ì£¼ë¬¸ë‚´ì—­ ë°ì´í„° ìˆ˜ì§‘
            const htmlContent = document.getElementById('html_content').value;
            const optionCount = parseInt(document.getElementById('option_count').value);
            
            console.log(`ìˆ˜ì§‘ëœ HTML ë‚´ìš© ê¸¸ì´: ${htmlContent ? htmlContent.length : 0}ì`);
            console.log(`ìˆ˜ì§‘ëœ ì˜µì…˜ ê°œìˆ˜: ${optionCount}`);
            
            // ê¸°ë³¸ í•„ë“œë“¤ ì—…ë°ì´íŠ¸
            cardForm.querySelector('input[name="html_content"]').value = htmlContent;
            cardForm.querySelector('input[name="option_count"]').value = optionCount;
            
            // ì˜µì…˜ë³„ ì…ë ¥ í•„ë“œë“¤ ì¶”ê°€ (ì‹¤ì œ ì‚¬ìš©ì ì…ë ¥ê°’ ìˆ˜ì§‘)
            console.log(`ì˜µì…˜ë³„ ì…ë ¥ í•„ë“œ ìˆ˜ì§‘ ì‹œì‘ (ì˜µì…˜ ê°œìˆ˜: ${optionCount})`);
            for (let i = 0; i < parseInt(optionCount); i++) {
                // DOMì—ì„œ ì‹¤ì œ ì…ë ¥ê°’ ìˆ˜ì§‘
                const ìƒí’ˆëª… = document.getElementById(`option_${i}_ìƒí’ˆëª…`)?.value || '';
                const ì˜µì…˜ëª… = document.getElementById(`option_${i}_ì˜µì…˜ëª…`)?.value || '';
                const ìˆ˜ëŸ‰ = document.getElementById(`option_${i}_ìˆ˜ëŸ‰(ìˆ«ìë§Œ)`)?.value || '';
                const ìƒí’ˆê°€ê²© = document.getElementById(`option_${i}_ìƒí’ˆê°€ê²©(ìˆ«ìë§Œ)`)?.value || '';
                const ìƒí’ˆì´ë¯¸ì§€ = document.getElementById(`option_${i}_ìƒí’ˆì´ë¯¸ì§€`)?.value || '';
                const í• ì¸ì „ê¸ˆì•¡ = document.getElementById(`option_${i}_ìƒí’ˆ í• ì¸ ì „ ê¸ˆì•¡(ìˆ«ìë§Œ, 0ì…ë ¥ì‹œ ë¯¸ì¶œë ¥)`)?.value || '';
                
                console.log(`ì˜µì…˜ ${i+1}: ìƒí’ˆëª…=${ìƒí’ˆëª…}, ì˜µì…˜ëª…=${ì˜µì…˜ëª…}, ìˆ˜ëŸ‰=${ìˆ˜ëŸ‰}, ê°€ê²©=${ìƒí’ˆê°€ê²©}`);
                
                addHiddenField(cardForm, `option_${i}_ìƒí’ˆëª…`, ìƒí’ˆëª…);
                addHiddenField(cardForm, `option_${i}_ì˜µì…˜ëª…`, ì˜µì…˜ëª…);
                addHiddenField(cardForm, `option_${i}_ìˆ˜ëŸ‰(ìˆ«ìë§Œ)`, ìˆ˜ëŸ‰);
                addHiddenField(cardForm, `option_${i}_ìƒí’ˆê°€ê²©(ìˆ«ìë§Œ)`, ìƒí’ˆê°€ê²©);
                addHiddenField(cardForm, `option_${i}_ìƒí’ˆì´ë¯¸ì§€`, ìƒí’ˆì´ë¯¸ì§€);
                addHiddenField(cardForm, `option_${i}_ìƒí’ˆ í• ì¸ ì „ ê¸ˆì•¡(ìˆ«ìë§Œ, 0ì…ë ¥ì‹œ ë¯¸ì¶œë ¥)`, í• ì¸ì „ê¸ˆì•¡);
            }
            
            // ê¸°íƒ€ í•­ëª©ë“¤ ì¶”ê°€
            const ê¸°íƒ€í•„ë“œ = [
                "ìŠ¤í† ì–´ëª…", "ë°°ì†¡ë¹„", "ìˆ˜ë ¹ìëª…", "ì—°ë½ì²˜", "ì£¼ì†Œ",
                "ì£¼ë¬¸ê¸ˆì•¡(ì´ê²°ì œê¸ˆì•¡, ìˆ«ìë§Œ)", "ìƒí’ˆê¸ˆì•¡(ìˆ«ìë§Œ)", 
                "ì¿ í°í• ì¸(ìˆ«ìë§Œ, 0ì…ë ¥ì‹œ divì‚­ì œ)", "ê²°ì œë°°ì†¡ë¹„(ìˆ«ìë§Œ)", "ì¹´ë“œê²°ì œê¸ˆì•¡(ìˆ«ìë§Œ)"
            ];
            
            console.log("ê¸°íƒ€ í•­ëª© ìˆ˜ì§‘ ì‹œì‘");
            ê¸°íƒ€í•„ë“œ.forEach(field => {
                const element = document.getElementById(field);
                if (element) {
                    console.log(`${field}: ${element.value}`);
                    addHiddenField(cardForm, field, element.value);
                } else {
                    console.log(`${field}: ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ`);
                }
            });
            
            console.log("ì¹´ë“œì˜ìˆ˜ì¦ í¼ ì œì¶œ ë°ì´í„° ìˆ˜ì§‘ ì™„ë£Œ");
        });
    }
    
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ë¡œë”© ìˆ¨ê¸°ê¸° (í¼ ì œì¶œ í›„ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œ)
    hideOrderLoading();
    hideCardLoading();
});

// ìˆ¨ê²¨ì§„ í•„ë“œ ì¶”ê°€ í•¨ìˆ˜
function addHiddenField(form, name, value) {
    const hiddenField = document.createElement('input');
    hiddenField.type = 'hidden';
    hiddenField.name = name;
    hiddenField.value = value;
    form.appendChild(hiddenField);
}
</script>
{% endblock %}